<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microtiter Plate Data Merger</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body class="min-h-screen bg-gray-50 font-sans p-4 sm:p-8 text-sm">
<h1 class="text-2xl text-gray-700 mb-2 text-center">Microtiter Plate Data Merger</h2>
    <div class="max-w-full mx-auto px-4 sm:px-6 lg:px-8">
        
        <div id="upload-section" class="bg-white rounded-1xl shadow-xl p-6 border border-indigo-100 mb-6 flex flex-col md:flex-row gap-4">
            
            <label 
                id="drop-area"
                class="flex flex-col items-center justify-center border-2 border-dashed rounded-xl py-3 cursor-pointer border-indigo-300 hover:border-indigo-500 hover:hover:bg-indigo-50 transition-all flex-grow"
            >
                <span class="text-base font-semibold text-indigo-600 mb-2">Drag & Drop Files Here</span>
                <span class="text-sm text-gray-500">
                    or click to browse (.xlsx, .xls)
                </span>
                <input
                    type="file"
                    multiple
                    accept=".xlsx,.xls"
                    id="file-input"
                    class="hidden"
                />
            </label>

            <div class="flex-shrink-0 md:w-56 flex flex-col justify-center">
                <label for="sheet-index-select" class="text-xs font-medium text-gray-700 mb-1">Sheet Index (1-5)</label>
                <select
                    id="sheet-index-select"
                    class="block w-full text-sm py-2.5 px-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 bg-white"
                    title="Select the Excel sheet (0-indexed) to extract data from. Sheet 1 is index 0."
                >
                    <option value="0">Sheet 1</option>
                    <option value="1" selected>Sheet 2</option>
                    <option value="2">Sheet 3</option>
                    <option value="3">Sheet 4</option>
                    <option value="4">Sheet 5</option>
                </select>
            </div>
            <div class="flex-shrink-0 md:w-56 flex flex-col justify-center">
                <label for="preview-column-select" class="text-xs font-medium text-gray-700 mb-1">Preview Data Column</label>
                <select
                    id="preview-column-select"
                    class="block w-full text-sm py-2.5 px-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 bg-white"
                    title="Select the column from the chosen sheet to display in the 96-well preview grid."
                >
                    </select>
            </div>
        </div>
        
        <div class="flex flex-col lg:flex-row lg:gap-8">
            
            <div class="lg:w-1/3 flex flex-col space-y-4">
                <div id="file-list-container" class="hidden bg-white rounded-2xl shadow-xl p-6 border border-gray-100">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 border-b pb-4">
                      <h2 id="file-list-header" class="text-xl font-bold text-gray-800 mb-4 sm:mb-0">
                        Uploaded Files (0)
                      </h2>
                    </div>
                    
                    <div id="file-list" class="space-y-2">
                      </div>
                    
                </div>
            </div>

            <div class="lg:w-2/3 mt-6 lg:mt-0">
                <div id="merged-data-view" class="hidden bg-white rounded-2xl shadow-xl p-6">
                    <div class="flex justify-between items-center mb-6 border-b pb-4">
                      <h2 class="text-xl font-bold text-gray-800">
                        Microtiter Plate Preview (<span id="current-column-display">Column J</span>)
                      </h2>
                      <button
                        id="download-button"
                        class="flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-xl shadow-lg hover:bg-green-700 transition-all font-semibold text-sm"
                        disabled
                      >
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" x2="12" y1="15" y2="3"></line>
                        </svg>
                        Download combined data
                      </button>
                    </div>
                    
                    <div id="summary-info" class="text-xs text-gray-600 mb-4 p-3 bg-green-50 rounded-lg border border-green-200">
                      </div>
                    
                    <div id="merged-table-container" class="overflow-x-auto border border-gray-200 rounded-xl shadow-inner">
                      </div>

                    </div>
            </div>
            
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>